# Руководство по настройке оборудования

## Содержание
1. [Требуемые компоненты](#требуемые-компоненты)
2. [Подключение датчиков](#подключение-датчиков)
3. [Настройка контроллера](#настройка-контроллера)
4. [Калибровка датчиков](#калибровка-датчиков)
5. [Устранение неисправностей](#устранение-неисправностей)

## Требуемые компоненты

### Основные компоненты
- Плата ESP32 (рекомендуется ESP32-WROOM-32)
- Блок питания 5В/2А
- Монтажная плата (breadboard)
- Соединительные провода

### Датчики
| Назначение | Модель | Интерфейс | Питание |
|------------|--------|-----------|---------|
| Температура/влажность | AHT10 | I2C | 3.3В |
| Датчик pH | Gravity: Analog pH Sensor | Аналоговый | 5В |
| Датчик EC | Gravity: Analog TDS Sensor | Аналоговый | 5В |
| Датчик уровня воды | JSN-SR04T | Цифровой | 5В |

### Дополнительные компоненты
- Мультиплексор I2C (при необходимости)
- Усилитель сигнала ADS1115 (для аналоговых датчиков)
- Релейные модули
- Защитные диоды

## Подключение датчиков

### Схема подключения
```
ESP32 <--> I2C (SDA=21, SCL=22)
  |-- AHT10 (T/H)
  |-- ADS1115 (АЦП)
  |   |-- Датчик pH
  |   |-- Датчик EC
  |
  |-- GPIO
      |-- Реле насоса (GPIO12)
      |-- Реле света (GPIO13)
      |-- Датчик уровня воды (GPIO14)
```

### Таблица подключений

| Компонент | ESP32 | Примечание |
|-----------|-------|------------|
| AHT10 SDA | GPIO21 | I2C SDA |
| AHT10 SCL | GPIO22 | I2C SCL |
| ADS1115 SDA | GPIO21 | I2C SDA |
| ADS1115 SCL | GPIO22 | I2C SCL |
| pH Sensor | A0 (ADS1115) | Через делитель напряжения |
| EC Sensor | A1 (ADS1115) | Через делитель напряжения |
| Water Level | GPIO14 | Через делитель напряжения |
| Relay 1 | GPIO12 | Насос |
| Relay 2 | GPIO13 | Освещение |

## Настройка контроллера

### Первый запуск
1. Подключите питание к ESP32
2. Дождитесь инициализации WiFi точки доступа
3. Подключитесь к сети `GrowBox-XXXX` (пароль: `growbox123`)
4. Откройте браузер и перейдите по адресу `http://192.168.4.1`

### Настройка WiFi
1. В веб-интерфейсе перейдите в раздел "Настройки" > "Сеть"
2. Выберите вашу WiFi сеть из списка
3. Введите пароль от WiFi
4. Нажмите "Сохранить"
5. После перезагрузки устройство подключится к вашей сети

## Калибровка датчиков

### Калибровка датчика pH
1. Приготовьте калибровочные растворы (pH 4.01 и 7.01)
2. В веб-интерфейсе перейдите в "Калибровка" > "pH"
3. Опустите датчик в раствор pH 7.01 и нажмите "Калибровать нейтральный"
4. Промойте датчик дистиллированной водой
5. Опустите датчик в раствор pH 4.01 и нажмите "Калибровать кислотный"
6. Нажмите "Сохранить калибровку"

### Калибровка датчика EC
1. Приготовьте калибровочный раствор (1413 µS/cm)
2. В веб-интерфейсе перейдите в "Калибровка" > "EC"
3. Опустите датчик в калибровочный раствор
4. Введите значение 1413 и нажмите "Калибровать"
5. Нажмите "Сохранить калибровку"

## Устранение неисправностей

### Проблема: Датчики не определяются
- Проверьте питание датчиков
- Убедитесь в правильности подключения проводов
- Проверьте адреса I2C устройств

### Проблема: Неточные показания
- Проведите калибровку датчиков
- Убедитесь, что датчики не загрязнены
- Проверьте стабильность питания

### Проблема: Нет соединения с WiFi
- Проверьте правильность ввода пароля
- Убедитесь, что роутер раздаёт WiFi на частоте 2.4 ГГц
- Попробуйте перезагрузить роутер и контроллер

## Рекомендации по эксплуатации

1. Раз в месяц проводите калибровку датчиков
2. Избегайте попадания воды на электронные компоненты
3. Регулярно проверяйте надёжность соединений
4. Обновляйте прошивку при появлении новых версий

## Технические характеристики

- Напряжение питания: 5В ±5%
- Потребляемый ток: до 500 мА
- Рабочая температура: 0°C до 50°C
- Влажность: 20% до 90% (без конденсации)
- Размеры печатной платы: 100x80 мм
- Вес: ~50 г (без корпуса)
