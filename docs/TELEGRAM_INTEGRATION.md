# Интеграция Telegram-бота в GrowBox

## Оглавление
1. [Введение](#введение)
2. [Настройка бота](#настройка-бота)
3. [Настройка веб-интерфейса](#настройка-веб-интерфейса)
4. [Команды бота](#команды-бота)
5. [Настройка уведомлений](#настройка-уведомлений)
6. [Устранение неполадок](#устранение-неполадок)

## Введение

Telegram-бот позволяет удаленно управлять вашей системой GrowBox и получать уведомления о важных событиях. Бот поддерживает команды для получения текущего состояния системы и настройки пороговых значений для уведомлений.

## Настройка бота

1. Создайте нового бота через [@BotFather](https://t.me/botfather) в Telegram
2. Получите токен бота от BotFather
3. Узнайте свой Chat ID (можно использовать бота @userinfobot)

## Настройка веб-интерфейса

1. Откройте веб-интерфейс GrowBox
2. Перейдите в раздел "Настройки" > "Telegram"
3. Введите:
   - Токен бота
   - Ваш Chat ID
   - Включите уведомления об ошибках (при необходимости)
4. Нажмите "Сохранить настройки"

## Команды бота

Доступные команды:

- `/start` - Приветственное сообщение
- `/status` - Текущее состояние системы
- `/temp` - Температура воздуха и корней
- `/water` - Параметры воды (pH, EC, уровень)
- `/settings` - Настройки уведомлений
- `/help` - Справка по командам

## Настройка уведомлений

### Пороговые уведомления

Вы можете настроить уведомления при достижении определенных значений параметров:

1. Перейдите в раздел "Настройки" > "Пороги уведомлений"
2. Для каждого параметра укажите:
   - Включить/выключить уведомления
   - Пороговое значение
   - Тип сравнения (больше/меньше)
   - Гистерезис (чтобы избежать частых срабатываний)

### Доступные параметры для уведомлений:

- **pH воды** - кислотность раствора
- **Температура воды** - температура питательного раствора
- **EC воды** - электропроводность раствора
- **Уровень воды** - уровень в баке
- **Давление воды** - давление в системе полива
- **Температура корней** - температура в зоне корней
- **Температура воздуха** - температура в гроубоксе
- **Температура CPU** - температура процессора
- **Влажность воздуха** - влажность в гроубоксе

## Устранение неполадок

### Бот не отвечает на команды
- Проверьте, что бот добавлен в чат
- Убедитесь, что введен правильный Chat ID
- Проверьте подключение к интернету

### Не приходят уведомления
- Проверьте настройки уведомлений в веб-интерфейсе
- Убедитесь, что пороговые значения установлены корректно
- Проверьте логи системы на наличие ошибок

### Ошибка при сохранении настроек
- Проверьте корректность введенных данных
- Убедитесь, что устройство подключено к интернету
- Перезагрузите устройство и попробуйте снова

## Дополнительная информация

- Все настройки сохраняются в энергонезависимую память (NVS)
- При перезагрузке устройства настройки сохраняются
- Для сброса к заводским настройкам используйте соответствующую кнопку в веб-интерфейсе
